<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Throttling</title>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.min.css" integrity="sha256-oSrCnRYXvHG31SBifqP2PM1uje7SJUyX0nTwO2RJV54="
        crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
</head>

<body>
    <div class="wrapper">
        <h2>Throttling</h2>
        <p>Throttling - это обертка для любой функции, которое ограничивает количество вызовов
            функции за заданный промежуток времени.
            Например throttling(todo, 1000) должно запускать функцию todo раз в 1000 миллисекунд. 
            Но с двумя важными особенностями.
        </p>
        <p>Если запросы на выполнение функции (todo) поступают чаще, чем раз в период (1000), 
            то эти запросы на выполнение игнорируюся.
            </p>
        <p class="attention">Самый последний запрос выполняется в любом случае,
             не дожидаясь завершения окончания периода ожидания (1000мск). 
             Это должно происходить потому что последний поступивший запрос предполагает конечное состояние рассчитанное функцией
            (todo). И нет причин откладывать вычисление конечного состояния.</p>
        <p>PS - подобная обертка для функции является паттерном "Декоратор". См. <a href="https://ru.wikipedia.org/wiki/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F">паттерны в программировании</a></p>            
        <p>Пример throttling в библиотеке  <a href="https://lodash.com/docs/4.17.10#throttle">lodash</a></p>
        <div>
            <pre class="code">
                HTML
&lt;script src="https://cdn.jsdelivr.net/npm/lodash@4.17.10/lodash.min.js"&gt;&lt;script&gt;
                JS
function updateData () { ...}                
window.addEventListener('scroll', _.throttle(updateData, 100))  
            </pre>
        </div>
        <h4>Demo</h4>
            <div class="code">Default: window.pageYOffset = <span class="getScrollYN  get"></span></div>
            <div class="code">Debounce: window.pageYOffset = <span class="getScrollYD  get"></span></div>
        <div class="img-wrp">
            <img src="../img/throttling.svg" alt="throttling">
        </div>
    </div>
    <script src="../js/throttling.js"></script>
</body>

</html>